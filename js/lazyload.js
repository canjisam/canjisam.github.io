(()=>{let n={rootMargin:"50px 0px",threshold:.01,placeholder:'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1 1"%3E%3C/svg%3E',webpSupport:!1};function e(){var e=document.createElement("canvas"),e=(e.width=1,e.height=1,5===e.toDataURL("image/webp").indexOf("image/webp"));return n.webpSupport=e}function t(){e();let t=new IntersectionObserver((e,s)=>{e.forEach(e=>{var t,a,r,o;e.isIntersecting&&("IMG"===(e=e.target).tagName?(a=e).dataset.src&&(r=n.webpSupport&&a.dataset.webp?a.dataset.webp:a.dataset.src,(o=new Image).onload=function(){a.src=this.src,a.classList.add("loaded"),a.removeAttribute("data-src"),a.removeAttribute("data-webp")},o.onerror=function(){a.src=a.dataset.src,a.classList.add("loaded")},o.src=r):(t=e).dataset.bg&&(o=n.webpSupport&&t.dataset.webpBg?t.dataset.webpBg:t.dataset.bg,(r=new Image).onload=function(){t.style.backgroundImage=`url(${this.src})`,t.classList.add("bg-loaded"),t.removeAttribute("data-bg"),t.removeAttribute("data-webp-bg")},r.src=o),s.unobserve(e))})},n);document.querySelectorAll("[data-src], [data-bg]").forEach(e=>{"IMG"!==e.tagName||e.src||(e.src=n.placeholder),t.observe(e)})}function a(){var e=document.querySelectorAll("video[data-src]");let t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&((e=e.target).src=e.dataset.src,e.load(),e.play(),t.unobserve(e))})},{rootMargin:"100px"});e.forEach(e=>{t.observe(e)})}function r(){var e=document.querySelectorAll("iframe[data-src]");let t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&((e=e.target).src=e.dataset.src,t.unobserve(e))})},{rootMargin:"100px"});e.forEach(e=>{t.observe(e)})}function o(){["/img/favicon.png","/img/avatar.png"].forEach(e=>{(new Image).src=e})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{t(),a(),r(),o()}):(t(),a(),r(),o()),window.LazyLoad={init:t,checkWebPSupport:e}})();